---
title: "TCGA-example"
output: 
  rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{TCGA-example}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  warning = FALSE,
  message = FALSE
)

```

This vignette introduces `curatedPCaData` and provides an overview of the  package using data from TCGA as an example. 

***

3 different types of raw data are currently available: 
    + `gex_*.RData` contains gene expression values
    + `cna_*.RData` contains copy number values
    + `clincial_*.RData` contains clinical/phenotype information
    
These elements are created with internal functions within `curatedPCaData` and are then used to derive additional measures, such as immune scores. 
These individual elements are combined into a `MultiAssayExperiment object` (abbreviation: `MAE`, in lower case by convention). 

The raw data types are combined into these mae objects:
    + `mae_tcga.RData` for TCGA
    + `mae_taylor.RData` for Taylor et al. (covers both GEO and cBioPortal sources)
    + `mae_sun.RData` for Sun et al.

## Introduction 

In this vignette, we will : 

1. Examine the data as provided in `curatedPCaData`. 
2. Run a simple analysis 

## The data 

The individual elements are housed within the `data-raw/` folder of the package and follows a simply naming convention of `data type` and `first author` separated by a `_` (see dataset types above). 
A `MAE` for each study is provided to the users under the `data/` folder. 

```{r importing}
library(curatedPCaData)
mae_tcga

mae_tcga[["gex"]][1:5,1:5]

# MAE-objects are 3-dimensional arrays:
# 1st: Variables (e.g. genes)
# 2nd: Sample IDs
# 3rd: Platforms (e.g. 'omics)
# For example:
wideFormat(curatedPCaData::mae_tcga[c("TP53", "BRCA1", "BRCA2"), c("TCGA.EJ.5502", "TCGA.YJ.A8SW"), c("gex", "cna")])

```

All functions and individual elements for creating the final `MAE` were created using internal functions (accessible with `:::`) and saved in the `data-raw/` folder in the github and is not compiled with the package.

## Simple analysis



```{r subset_data}

wide_tcga = MultiAssayExperiment::wideFormat(mae_tcga["PTEN", , ],
    colDataCols=c("overall_survival_status", "days_to_overall_survival", "gleason_grade"))

summary(glm(days_to_overall_survival ~ gex_PTEN + cna_PTEN + gleason_grade, data = wide_tcga))

```


